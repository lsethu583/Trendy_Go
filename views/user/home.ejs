<%-include ('../layouts/userHeader.ejs') %>

    <div class="mobile-header-active mobile-header-wrapper-style">
        <div class="mobile-header-wrapper-inner">
            <div class="mobile-header-top">
                <div class="mobile-header-logo">
                    <a href="index.html"><img src="assets/imgs/theme/logo.svg" alt="logo"></a>
                </div>
                <div class="mobile-menu-close close-style-wrap close-style-position-inherit">
                    <button class="close-style search-close">
                        <i class="icon-top"></i>
                        <i class="icon-bottom"></i>
                    </button>
                </div>
            </div>
            <div class="mobile-header-content-area">
                <div class="mobile-search search-style-3 mobile-header-border">
                    <form action="#">
                        <input type="text" placeholder="Search for items…">
                        <button type="submit"><i class="fi-rs-search"></i></button>
                    </form>
                </div>
                <div class="mobile-menu-wrap mobile-header-border">
                    <div class="main-categori-wrap mobile-header-border">
                        <a class="categori-button-active-2" href="#">
                            <span class="fi-rs-apps"></span> Browse Categories
                        </a>
                        <div class="categori-dropdown-wrap categori-dropdown-active-small">
                            <ul>
                                <li><a href="shop-grid-right.html"><i class="evara-font-dress"></i>Women's Clothing</a></li>
                             
                            </ul>
                        </div>
                    </div>
                    <!-- mobile menu start -->
                    <nav>
                        <ul class="mobile-menu">
                            <li class="menu-item-has-children"><span class="menu-expand"></span><a href="/home">Home</a>
                                <ul class="dropdown">
                                    <li><a href="index.html">Home 1</a></li>
                                    <li><a href="index-2.html">Home 2</a></li>
                                    <li><a href="index-3.html">Home 3</a></li>
                                    <li><a href="index-4.html">Home 4</a></li>
                                </ul>
                            </li>
                            <li class="menu-item-has-children"><span class="menu-expand"></span><a href="/shop">shop</a>
                                <ul class="dropdown">
                                    <li><a href="shop-grid-right.html">Shop Grid – Right Sidebar</a></li>
                                    <li><a href="shop-grid-left.html">Shop Grid – Left Sidebar</a></li>
                                    <li><a href="shop-list-right.html">Shop List – Right Sidebar</a></li>
                                    <li><a href="shop-list-left.html">Shop List – Left Sidebar</a></li>
                                    <li><a href="shop-fullwidth.html">Shop - Wide</a></li>
                                    <li class="menu-item-has-children"><span class="menu-expand"></span><a href="#">Single Product</a>
                                        <ul class="dropdown">
                                            <li><a href="shop-product-right.html">Product – Right Sidebar</a></li>
                                            <li><a href="shop-product-left.html">Product – Left Sidebar</a></li>
                                            <li><a href="shop-product-full.html">Product – No sidebar</a></li>
                                        </ul>
                                    </li>
                                    <li><a href="shop-filter.html">Shop – Filter</a></li>
                                    <li><a href="shop-wishlist.html">Shop – Wishlist</a></li>
                                    <li><a href="shop-cart.html">Shop – Cart</a></li>
                                    <li><a href="shop-checkout.html">Shop – Checkout</a></li>
                                    <li><a href="shop-compare.html">Shop – Compare</a></li>
                                </ul>
                            </li>
                            <li class="menu-item-has-children"><span class="menu-expand"></span><a href="#">Mega menu</a>
                                <ul class="dropdown">
                                    <li class="menu-item-has-children"><span class="menu-expand"></span><a href="#">Women's Fashion</a>
                                        <ul class="dropdown">
                                            <li><a href="shop-product-right.html">Dresses</a></li>
                                            <li><a href="shop-product-right.html">Blouses & Shirts</a></li>
                                            <li><a href="shop-product-right.html">Hoodies & Sweatshirts</a></li>
                                            <li><a href="shop-product-right.html">Women's Sets</a></li>
                                        </ul>
                                    </li>
                                    <li class="menu-item-has-children"><span class="menu-expand"></span><a href="#">Men's Fashion</a>
                                        <ul class="dropdown">
                                            <li><a href="shop-product-right.html">Jackets</a></li>
                                            <li><a href="shop-product-right.html">Casual Faux Leather</a></li>
                                            <li><a href="shop-product-right.html">Genuine Leather</a></li>
                                        </ul>
                                    </li>
                                    <li class="menu-item-has-children"><span class="menu-expand"></span><a href="#">Technology</a>
                                        <ul class="dropdown">
                                            <li><a href="shop-product-right.html">Gaming Laptops</a></li>
                                            <li><a href="shop-product-right.html">Ultraslim Laptops</a></li>
                                            <li><a href="shop-product-right.html">Tablets</a></li>
                                            <li><a href="shop-product-right.html">Laptop Accessories</a></li>
                                            <li><a href="shop-product-right.html">Tablet Accessories</a></li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                            <li class="menu-item-has-children"><span class="menu-expand"></span><a href="blog-category-fullwidth.html">Blog</a>
                                <ul class="dropdown">
                                    <li><a href="blog-category-grid.html">Blog Category Grid</a></li>
                                    <li><a href="blog-category-list.html">Blog Category List</a></li>
                                    <li><a href="blog-category-big.html">Blog Category Big</a></li>
                                    <li><a href="blog-category-fullwidth.html">Blog Category Wide</a></li>
                                    <li class="menu-item-has-children"><span class="menu-expand"></span><a href="#">Single Product Layout</a>
                                        <ul class="dropdown">
                                            <li><a href="blog-post-left.html">Left Sidebar</a></li>
                                            <li><a href="blog-post-right.html">Right Sidebar</a></li>
                                            <li><a href="blog-post-fullwidth.html">No Sidebar</a></li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                            <li class="menu-item-has-children"><span class="menu-expand"></span><a href="#">Pages</a>
                                <ul class="dropdown">
                                    <li><a href="page-about.html">About Us</a></li>
                                    <li><a href="page-contact.html">Contact</a></li>
                                    <li><a href="/profile">My Account</a></li>
                                    <li><a href="page-login-register.html">login/register</a></li>
                                    <li><a href="page-purchase-guide.html">Purchase Guide</a></li>
                                    <li><a href="page-privacy-policy.html">Privacy Policy</a></li>
                                    <li><a href="page-terms.html">Terms of Service</a></li>
                                    <li><a href="page-404.html">404 Page</a></li>
                                </ul>
                            </li>
                            <li class="menu-item-has-children"><span class="menu-expand"></span><a href="#">Language</a>
                                <ul class="dropdown">
                                    <li><a href="#">English</a></li>
                                    <li><a href="#">French</a></li>
                                    <li><a href="#">German</a></li>
                                    <li><a href="#">Spanish</a></li>
                                </ul>
                            </li>
                        </ul>
                    </nav>
                    <!-- mobile menu end -->
                </div>
                <div class="mobile-header-info-wrap mobile-header-border">
                    <div class="single-mobile-header-info mt-30">
                        <a  href="page-contact.html"> Our location </a>
                    </div>
                    <div class="single-mobile-header-info">
                        <a href="page-login-register.html">Log In / Sign Up </a>
                    </div>
                    <div class="single-mobile-header-info">
                        <a href="#">(+01) - 2345 - 6789 </a>
                    </div>
                </div>
                <div class="mobile-social-icon">
                    <h5 class="mb-15 text-grey-4">Follow Us</h5>
                    <a href="#"><img src="assets/imgs/theme/icons/icon-facebook.svg" alt=""></a>
                    <a href="#"><img src="assets/imgs/theme/icons/icon-twitter.svg" alt=""></a>
                    <a href="#"><img src="assets/imgs/theme/icons/icon-instagram.svg" alt=""></a>
                    <a href="#"><img src="assets/imgs/theme/icons/icon-pinterest.svg" alt=""></a>
                    <a href="#"><img src="assets/imgs/theme/icons/icon-youtube.svg" alt=""></a>
                </div>
            </div>
        </div>
    </div>

    <main class="main">
        <% if(locals.banner){ %>
           <section class="home-slider position-relative pt-25 pb-20">
            <div class="container">
                <div class="row">
                    <div class="col-lg-9" >
                        <div class="position-relative">
                            <div class="hero-slider-1 style-3 dot-style-1 dot-style-1-position-1">
                                <div class="single-hero-slider single-animation-wrap">
                                    <div class="container">
                                        <div class="slider-1-height-3 slider-animated-1">
                                            <div class="hero-slider-content-2">
                                                <h4 class="animated"><%= banner[0].name %></h4>
                                                <h2 class="animated fw-900"><%= banner[0].title1 %></h2>
                                                <h1 class="animated fw-900 text-brand"><%= banner[0].title2 %></h1>
                                                <p class="animated"><%= banner[0].title3 %></p>
                                                <a class="animated btn btn-brush btn-brush-3" href="shop-product-right.html"> <%= banner[0].title4 %> </a>
                                            </div>
                                            <div class="slider-img">
                                                <img src="/assetsb/banner/<%=banner[0].image[0]%>" alt="" style="width: 10000px; height: 10000 px;">
                                            </div>
                                            
                                        </div>
                                    </div>
                                </div>
                                <div class="single-hero-slider single-animation-wrap">
                                    <div class="container">
                                        <div class="slider-1-height-3 slider-animated-1">
                                            <div class="hero-slider-content-2">
                                                <h4 class="animated">Tech Promotions</h4>
                                                <h2 class="animated fw-900">Tech Trending</h2>
                                                <h1 class="animated fw-900 text-brand">Great Collection</h1>
                                                <p class="animated">Save more with coupons & up to 20% off</p>
                                                <a class="animated btn btn-brush btn-brush-3" href="shop-product-right.html"> Shop Now </a>
                                            </div>
                                            <div class="slider-img">
                                                <img src="assets/imgs/slider/slider-5.png" alt="">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="slider-arrow hero-slider-1-arrow style-3"></div>
                        </div>
                    </div>
                 
                </div>
            </div>
        </section>
        <% } %>

        


        <section class="featured section-padding">
            <div class="container">
                <div class="row">
                    <div class="col-lg-2 col-md-4 mb-md-3 mb-lg-0">
                        <div class="banner-features wow fadeIn animated hover-up animated">
                            <img src="assets/imgs/theme/icons/feature-1.png" alt="">
                            <h4 class="bg-1">Free Shipping</h4>
                        </div>
                    </div>
                    <div class="col-lg-2 col-md-4 mb-md-3 mb-lg-0">
                        <div class="banner-features wow fadeIn animated hover-up animated">
                            <img src="assets/imgs/theme/icons/feature-2.png" alt="">
                            <h4 class="bg-3">Online Order</h4>
                        </div>
                    </div>
                    <div class="col-lg-2 col-md-4 mb-md-3 mb-lg-0">
                        <div class="banner-features wow fadeIn animated hover-up animated">
                            <img src="assets/imgs/theme/icons/feature-3.png" alt="">
                            <h4 class="bg-2">Save Money</h4>
                        </div>
                    </div>
                    <div class="col-lg-2 col-md-4 mb-md-3 mb-lg-0">
                        <div class="banner-features wow fadeIn animated hover-up animated">
                            <img src="assets/imgs/theme/icons/feature-4.png" alt="">
                            <h4 class="bg-4">Promotions</h4>
                        </div>
                    </div>
                    <div class="col-lg-2 col-md-4 mb-md-3 mb-lg-0">
                        <div class="banner-features wow fadeIn animated hover-up animated">
                            <img src="assets/imgs/theme/icons/feature-5.png" alt="">
                            <h4 class="bg-5">Happy Sell</h4>
                        </div>
                    </div>
                    <div class="col-lg-2 col-md-4 mb-md-3 mb-lg-0">
                        <div class="banner-features wow fadeIn animated hover-up animated">
                            <img src="assets/imgs/theme/icons/feature-6.png" alt="">
                            <h4 class="bg-6">24/7 Support</h4>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <section class="product-tabs section-padding wow fadeIn animated">
            <div class="container">
                <div class="tab-header">
                    <ul class="nav nav-tabs" id="myTab" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="nav-tab-one" data-bs-toggle="tab" data-bs-target="#tab-one" type="button" role="tab" aria-controls="tab-one" aria-selected="true">Featured</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="nav-tab-two" data-bs-toggle="tab" data-bs-target="#tab-two" type="button" role="tab" aria-controls="tab-two" aria-selected="false">Popular</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="nav-tab-three" data-bs-toggle="tab" data-bs-target="#tab-three" type="button" role="tab" aria-controls="tab-three" aria-selected="false">New added</button>
                        </li>
                    </ul>
                    <a href="#" class="view-more d-none d-md-flex">View More<i class="fi-rs-angle-double-small-right"></i></a>
                </div>
                <!--End nav-tabs-->




                <section class="product-tabs pt-25 pb-20 wow fadeIn animated">
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-2">
                                <div class="widget-category mb-30"  id="category-filter">
                                    <h5 class="section-title style-1 mb-30 wow fadeIn animated">Category </h5>
                                    <ul class="categories">
                                        <% if (typeof category !== 'undefined' && category) { %>
                                            <% for (let i = 0; i < category.length; i++) { %>
                                                <li><a href="/categorysort/?category=<%= category[i]._id %>"><%= category[i].categoryName %></a></li>
                                              
                                                
                                                <% } %>
                                                <% } else { %>
                                            <li><a href="#">Default Category 1</a></li>
                                            <li><a href="#">Default Category 2</a></li>
                                            <!-- Add more default categories if needed -->
                                            <% } %>
                                    </ul>
                                </div>
                                
            
                                <div class="widget-category mb-30" id="sort-filter">
                                    <h5 class="section-title style-1 mb-30 wow fadeIn animated">Sort by</h5>
                                    <ul class="categories">
                                       
                                        <li><a href="/categorysort/lowtohigh">Price: Low to High</a></li>
                                        <li><a href="/categorysort/hightolow">Price: High to Low</a></li>
                                        <li><a href="/categorysort/A-Z">Aa - Zz</a></li>
                                        <li><a href="/categorysort/Z-A">Zz - Aa</a></li>
                                    </ul>
                                </div>
            
                               
                               
                                
                                
                               
                                
                            </div>
                            <div class="col-lg-10">
                                <div class="tab-header">
                                    
                                    <a href="#" class="view-more d-none d-md-flex">View More<i class="fi-rs-angle-double-small-right"></i></a>
                                </div>
                                <!--End nav-tabs-->
                                <div class="tab-content wow fadeIn animated" id="myTabContent">
                                    <div class="tab-pane fade show active" id="tab-one" role="tabpanel" aria-labelledby="tab-one">
                                        <div class="row product-grid-4">
                                            <% if (typeof category !== 'undefined' && category) { %>
            
                                            <% for (let i = 0; i < products.length; i++) { %>
                                            <div class="col-lg-4 col-md-4 col-12 col-sm-6">
                                                <div class="product-cart-wrap mb-30">
                                                    <div class="product-img-action-wrap">
                                                        <a href="/singleProductDetails/<%= products[i]._id %>"><div class="left">
                                                            <% if (products[i].image && products[i].image.length > 0) { %>
                                                                <img src="assetsb/productImages/<%=products[i].image[0]%>" class="img-thumbnail custom-img-size" style="object-fit: contain;"  alt="<%= products[i].name %>">
                                                            
                                                        </div></a>
                                                        <div class="product-action-1">
                                                            
                                                            <a aria-label="Add To Wishlist" class="action-btn hover-up" onclick="addToWishlist('<%= products[i]._id %>')"  ><i class="fi-rs-heart"></i></a>
                                                          
                                                        </div>
                                                        <!-- <div class="product-badges product-badges-position product-badges-mrg">
                                                            <span class="hot">Hot</span>
                                                        </div> -->
                                                    </div>
                                                    <div class="product-content-wrap">
                                                        <!-- <div class="product-category">
                                                            <a href=""><h2>//brand name</h2></a>
                                                        </div> -->
                                                        <h6><a href=""><%= products[i].name  %></a></h6>
                                                     
                                                     
                                                       
                                                        <div class="product-price">
                                                            <span>&#8377;</span>
            
                                                            <span><%= products[i].discount_price %> </span>
                                                            <span class="old-price"><%= products[i].price %></span>
                                                            <span id="offer" ></span>
                                                        </div>
                                                        <div class="product-action-1 show">
                                                          
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <% } else { %>
                                                            
                                                <img src="default-image.jpg" class="img-thumbnail custom-img-size" alt="Default Item">
                                            <% } %>
                                            <% } %>
                                        <!--End product-grid-4-->
                                    </div>
                                    <% } else { %>
            
            
                                        <% } %>
                                    <!--En tab one (Featured)-->
                                    
                                    <!--En tab three (New added)-->
                                </div>
                                <!--End tab-content-->
                                <% if(locals.totalPages){ %>
                                    <div class="pagination-area mt-30 mb-50">
                                        <nav aria-label="Page navigation example">
                                            <ul class="pagination justify-content-start">
                                                <% for (let i = 1; i <= totalPages; i++) { %>
                                                    <li class="page-item <%= currentPage == i ? 'active' : '' %>">
                                                        <a class="page-link" href="/?page=<%= i %>"><%= i %></a>
                                                    </li>
                                                <% } %>
                                            </ul>
                                        </nav>
                                    </div>
                                    <% } %>
                
                                </div>
                            </div>
                        </div>
                    </section>





                <div class="tab-content wow fadeIn animated" id="myTabContent">
                    <div class="tab-pane fade show active" id="tab-one" role="tabpanel" aria-labelledby="tab-one">
                        <div class="row product-grid-4">
                            
                            <% for(let i=0;i<products.length;i++){%>
                            <div class="col-lg-3 col-md-4 col-12 col-sm-6">
                                <div class="product-cart-wrap mb-30">
                                    <div class="product-img-action-wrap">
                                        <div class="product-img product-img-zoom">
                                            <a href="/productdetail?id=<%=products[i]._id%>">
                                                <img class="default-img" src="/assetsb/productImages/<%=products[i].image[0]%>" alt="">
                                                <img class="hover-img" src="/assetsb/productImages/<%=products[i].image[0]%>" alt="">
                                            </a>    
                                        </div>
                                        <div class="product-action-1">
                                            
                                            <a aria-label="Add To Wishlist" data-product-id="<%= products[i]._id %>" class="wishlist action-btn hover-up" ><i class="fi-rs-heart"></i></a>
                                         
                                        </div>
                                        <!-- <div class="product-badges product-badges-position product-badges-mrg">
                                            <span class="hot">Hot</span>
                                        </div> -->
                                    </div>
                                    <div class="product-content-wrap">
                                        <div class="product-category">
                                            <a href="shop-grid-right.html"><%= products[i].productCategory.categoryName %></a>
                                        </div>
                                        <h2><a href="shop-product-right.html"><%=products[i].product_name%></a></h2>
                                        <div class="rating-result" title="90%">
                                            <span>
                                                <span>90%</span>
                                            </span>
                                        </div>
                                        <div class="product-price">
                                            <span>&#8377;<%= products[i].discount_price %> </span>
                                            <span class="old-price">&#8377;<%= products[i].price %></span>
                                        </div>
                                        <div class="product-action-1 show">
                                            <a aria-label="Add To Cart" class="action-btn hover-up" href="/cart"><i class="fi-rs-shopping-bag-add"></i></a>
                                        </div>
                                    </div>
                                </div>
                            </div>

                       <% }%>
                           
                        </div>
                        <!--End product-grid-4-->
                    </div>
                    <!--En tab one (Featured)-->
                    
                    <!--En tab two (Popular)-->
                    
                    <!--En tab three (New added)-->
                </div>
                <!--End tab-content-->
            </div>
        </section>
        
    </main>
    <script src="sweetalert2/dist/sweetalert2.min.js"></script>
    <script>
// Get all elements with the class name 'wishlist'
const wishlistButtons = document.getElementsByClassName('wishlist');

// Convert the HTMLCollection to an array and loop through each button
Array.from(wishlistButtons).forEach(button => {
    // Add a click event listener to each button
    button.addEventListener('click', async function(event) {
        event.preventDefault();
        const productId = this.getAttribute('data-product-id');

        // Now you can use the productId in your JavaScript logic
        

        // Your remaining logic...
        const inputOptions = new Promise((resolve) => {
            setTimeout(() => {
                resolve({
                    "S": "S",
                    "M": "M",
                    "L": "L"
                });
            }, 1000);
        });

        try {
            const { value: color } = await Swal.fire({
                title: "Select size",
                input: "radio",
                inputOptions,
                inputValidator: (value) => {
                    if (!value) {
                        return "You need to choose something!";
                    }
                }
            });

            if (color) {
                Swal.fire({ html: `You selected: ${color}` });
                // Your AJAX request...

                $.ajax({
                url:"/addtowishlistfromhome",
                method:"POST",
                data:{
                    size:color,
                    productId:productId

                },
                success:function(response){
                    console.log("response : ",response);
                    if(response){
                        Swal.fire({
  
  icon: "success",
  title:response.message,
  showConfirmButton: false,
  timer: 1500
});
                    }
                },
                error:function(xhr){
                    console.log("xhr : ",xhr);
                }
            })
            }
        } catch (error) {
            console.error(error);
        }
    });
});


    </script>
    
    <%- include('../layouts/userFooter.ejs') %>
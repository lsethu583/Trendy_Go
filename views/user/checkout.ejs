<%- include('../layouts/userHeader') %>

<style>
    .address-message p {
    color: red;
    font-weight: bold;
    font-size: 1.2em; /* Adjust font size as needed */
}

</style>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>


    <main class="main">
        <div class="page-header breadcrumb-wrap">
            <div class="container">
                <div class="breadcrumb">
                    <a href="index.html" rel="nofollow">Home</a>
                    <span></span> Shop
                    <span></span> Checkout
                </div>
            </div>
        </div>
        <section class="mt-50 mb-50">
            <div class="container">
                <div class="row">
                    <div class="col-lg-6 mb-sm-15">
                        <div class="toggle_info">
                            <span><i class="fi-rs-user mr-10"></i><span class="text-muted">Already have an account?</span> <a href="#" data-bs-toggle="collapse" class="collapsed" aria-expanded="false">Click here to login</a></span>
                        </div>
                        <div class="panel-collapse collapse login_form" id="loginform">
                            <div class="panel-body">
                                <p class="mb-30 font-sm">If you have shopped with us before, please enter your details below. If you are a new customer, please proceed to the Billing &amp; Shipping section.</p>
                                <form method="post">
                                    <div class="form-group">
                                        <input type="text" name="email" placeholder="Username Or Email">
                                    </div>
                                    <div class="form-group">
                                        <input type="password" name="password" placeholder="Password">
                                    </div>
                                    <div class="login_footer form-group">
                                        <div class="chek-form">
                                            <div class="custome-checkbox">
                                                <input class="form-check-input" type="checkbox" name="checkbox" id="remember" value="">
                                                <label class="form-check-label" for="remember"><span>Remember me</span></label>
                                            </div>
                                        </div>
                                        <a href="#">Forgot password?</a>
                                    </div>
                                    <div class="form-group">
                                        <button class="btn btn-md" name="login">Log in</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>


                   


                </div>
                <div class="row">
                    <div class="col-12">
                        <div class="divider mt-50 mb-50"></div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="mb-25">
                            <h4>Billing Details</h4>
                        </div>
                        
                        
                        
                        <div class="container">
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="tab-pane fade show" id="account-detail" role="tabpanel" aria-labelledby="account-detail-tab">
                                        <div class="card">
                                            <div class="card-header">
                                                <h5>Address Details</h5>
                                            </div>
                                            <div class="card-body">
                                                <!-- Display existing addresses -->
                                                <% if (locals.addresses && addresses.length > 0) { %>
                                                    <% for (let i = 0; i < addresses.length; i++) { %>
                                                        <div class="row mb-3">
                                                            <div class="col-md-12">
                                                                <div class="card">
                                                                    <div class="card-header">
                                                                        <h5 class="mb-0">Address Type: <%= addresses[i].addresstype %> Address</h5>
                                                                        <div class="form-check form-check-inline">
                                                                            <input class="form-check-input" type="radio" name="selectedAddress" id="address<%= i %>" value="<%= addresses[i]._id %>" <%= addresses[i].isSelected ? 'checked' : '' %>>
                                                                            <label class="form-check-label" for="address<%= i %>">Select</label>
                                                                        </div>
                                                                    </div>
                                                                    
                                                                    
                                                                    <div class="card-body">
                                                                        <!-- Display address details -->
                                                                        <address>
                                                                            Name: <%= addresses[i].name %><br>
                                                                            House Name: <%= addresses[i].housename %><br>
                                                                            Landmark: <%= addresses[i].landmark %><br>
                                                                            City: <%= addresses[i].city %><br>
                                                                            State: <%= addresses[i].state %><br>
                                                                            Pincode: <%= addresses[i].pincode %><br>
                                                                            Phone: <%= addresses[i].phone %><br>
                                                                            Alternate Phone: <%= addresses[i].altphone %>
                                                                        </address>



                                                                       



                                                                        <!-- Edit button -->
                                                                        <a href="#" class="btn btn-sm edit-address-btn" data-address-id="<%= addresses[i]._id %>">Edit</a>

                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    <% } %>
                                                <% } %>
                                                
                                                <!-- Form for adding new address -->
                                                <button type="button" class="btn btn-primary" id="openAddAddressModal">Add Address</button>
                                                <div class="modal" id="addAddressModal" tabindex="-1" role="dialog">
                                                    <div class="modal-dialog" role="document">
                                                      <div class="modal-content">
                                                        <div class="modal-header">
                                                          <h5 class="modal-title">Add New Address</h5>
                                                          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                            <span aria-hidden="true">&times;</span>
                                                          </button>
                                                        </div>
                                                        <div class="modal-body">
                                                <form method="post" action="/createaddressfromcheckout">
                                                    <div class="row">
                                                        <div class="form-group col-md-10">
                                                            <label>Address type <span class="required">*</span></label>
                                                            <select required class="form-control square" id="address_type" name="address_type" onchange="validateAddressType()">
                                                                <option value="">Select Address Type</option>
                                                                <option value="home">Home</option>
                                                                <option value="company">Company</option>
                                                            </select>
                                                            <div id="address_type_error" class="alert alert-danger" style="display: none;"></div>
                                                        </div>
                                                        
                                                        
                                                        
                
                                                        <div class="form-group col-md-10">
                                                            <label>Username <span class="required">*</span></label>
                                                            <input required="" class="form-control square" id="name" name="name" type="text" onkeyup="validateName()">
                                                            <div id="name_error" class="alert alert-danger" style="display: none;"></div>
                                                        </div>
                                                       
                                                        <div class="form-group col-md-10">
                                                            <label>House Name <span class="required">*</span></label>
                                                            <input required="" class="form-control square" id="housename" name="housename" type="text" onkeyup="validateHouseName()">
                                                            <div id="housename_error" class="alert alert-danger" style="display: none;"></div>
                                                        </div>
                                                        <div class="form-group col-md-4">
                                                            <label>Landmark <span class="required">*</span></label>
                                                            <input required="" class="form-control square" id="landmark" name="landmark" type="" onkeyup="validateLandmark()">
                                                            <div id="landmark_error" class="alert alert-danger" style="display: none;"></div>
                                                        </div>
                                                        <div class="form-group col-md-4">
                                                            <label>City <span class="required">*</span></label>
                                                            <input required="" class="form-control square" id="city" name="city" type="" onkeyup="validateCity()">
                                                            <div id="city_error" class="alert alert-danger" style="display: none;"></div>
                                                        </div>
                                                        <div class="form-group col-md-4">
                                                            <label>State <span class="required">*</span></label>
                                                            <input required="" class="form-control square" id="state" name="state" type="" onkeyup="validateState()">
                                                            <div id="state_error" class="alert alert-danger" style="display: none;"></div>
                                                        </div>
                                                        <div class="form-group col-md-10">
                                                            <label>Pincode <span class="required">*</span></label>
                                                            <input required="" class="form-control square" id="pincode" name="pincode" type="" onkeyup="validatePincode()">
                                                            <div id="pincode_error" class="alert alert-danger" style="display: none;"></div>
                                                        </div>
                
                
                                                     <div class="form-group col-md-6">
                                                      <label>Phone <span class="required">*</span></label>
                                                        <input required="" class="form-control square" id="phone" name="phone" type="" onkeyup="validatePhone()">
                                                     <div id="phone_error" class="alert alert-danger" style="display: none;"></div>
                                                      </div>
                
                                                        <div class="form-group col-md-6">
                                                            <label>Alternate Phone <span class="required">*</span></label>
                                                            <input required="" class="form-control square" id="altphone" name="altphone" type="" onkeyup="validateAltPhone()" >
                                                            <div id="altphone_error" class="alert alert-danger" style="display: none;"></div>
                                                        </div>
                                                        <div class="col-md-12">
                                                            <button type="submit" class="btn btn-fill-out submit" name="submit" value="Submit">Save</button>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                            
                                          </div>
                                        </div>
                                      </div>
                                            </div>
                                           
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <script>
                            // Open the modal when the "Add Address" button is clicked
                            document.getElementById('openAddAddressModal').addEventListener('click', function() {
                              $('#addAddressModal').modal('show');
                            });
                          
                            // Submit the form when the "Save" button inside the modal is clicked
                            document.getElementById('submitAddressForm').addEventListener('click', function() {
                              // You can perform form validation here if needed
                              document.querySelector('#addAddressModal form').submit();
                            });
                          </script>
                          
                        
                        
                        
                        
                        
                        <style>
                            /* Style the container for the custom radio button */
                            .checkbox-container {
                                display: inline-block;
                                position: relative;
                                padding-left: 20px;
                                margin-bottom: 12px;
                                cursor: pointer;
                                font-size: 16px;
                            }
                        
                            /* Hide the default radio button */
                            .checkbox-container input {
                                position: absolute;
                                opacity: 0;
                                cursor: pointer;
                                height: 0;
                                width: 0;
                            }
                        
                            /* Style the custom radio button */
                            .checkmark {
                                position: absolute;
                                top: 0;
                                left: 0;
                                height: 16px;
                                width: 16px;
                                background-color: #fff;
                                border: 1px solid #ccc;
                                border-radius: 50%;
                            }
                        
                            /* On mouse-over, add a grey background color */
                            .checkbox-container:hover input ~ .checkmark {
                                background-color: #f4f4f4;
                            }
                        
                            /* When the radio button is checked, add a blue background */
                            .checkbox-container input:checked ~ .checkmark {
                                background-color: #2196F3;
                            }
                        
                            /* Create the dot/indicator (hidden when not checked) */
                            .checkmark:after {
                                content: "";
                                position: absolute;
                                display: none;
                            }
                        
                            /* Show the dot/indicator when the radio button is checked */
                            .checkbox-container input:checked ~ .checkmark:after {
                                display: block;
                            }
                        
                            /* Style the dot/indicator */
                            .checkbox-container .checkmark:after {
                                top: 4px;
                                left: 4px;
                                width: 8px;
                                height: 8px;
                                border-radius: 50%;
                                background: white;
                            }
                        </style>
                        
                        
                        
                    </div>
                    <div class="col-md-6">
                        <div class="order_review">
                            <div class="mb-20">
                                <h4>Your Orders</h4>
                            </div>
                                <div class="table-responsive order_table text-center">
                                <table class="table">
                                    <thead>
                                        <tr>
                                           
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <% var subtotal = 0; %>
                                       
                                        <% for (let i = 0; i < cart.products.length; i++) { %>
                                            
                                            <% let product = cart.products[i]; %>
                                            <tr>
                                                <td class="image product-thumbnail">
                                                    <img src="/assetsb/productImages/<%= product.productId.image[0] %>" alt="#">
                                                </td>
                                                <p id="product-id" style="display: none;"><%= product.productId._id %></p>
                                                <p id="product-size" style="display: none;"><%= product.size %></p>
                                                <p id="product-qty" style="display: none;"><%= product.quantity %></p>
                                                

                                                <td>
                                                    <h5><a href="shop-product-full.html"><%= product.productId.product_name %></a></h5>
                                                    <span class="product-qty"><%= product.quantity %></span>
                                                </td>
                                                <% let price = product.productId.offerPrice > 0 ? product.productId.offerPrice : product.productId.discount_price; %>
                                                <td>&#8377;<%= product.quantity * price %>.00</td>
                                            </tr>
                                            <% subtotal += product.quantity * price; %>
                                        <% } %>
                                        <tr>
                                            <th>SubTotal</th>
                                            <td class="product-subtotal" colspan="2">&#8377;<%= subtotal %>.00</td>
                                        </tr>
                                        <tr>
                                            <th>Shipping</th>
                                            <td colspan="2"><em>Free Shipping</em></td>
                                        </tr>
                                        
                                        <tr>
                                            <% if(locals.coupon){ %>
                                            <th>AppliedCoupon</th>
                                            <td id="discountcell" colspan="2"><em></em></td>
                                            <input type="hidden" name="couponcode" value="////">
                                        <% } %>
                                    </tr>
                                      
                                        <tr>
                                            <th>Total</th>
                                            <td colspan="2" id="totalAmount" class="product-subtotal"><span class="font-xl text-brand fw-900">&#8377;<%= subtotal %>.00</span></td>
                                        </tr>
                                        
                                    </tbody>
                                    
                                </table>
                            </div>




                            <div class="col-lg-6">
                                <div class="toggle_info">
                                    <span><i class="fi-rs-label mr-10"></i><span class="text-muted">Have a coupon?</span> <a href="#coupon" data-bs-toggle="collapse" class="collapsed" aria-expanded="false">Click here to enter your code</a></span>
                                </div>
                                <div class="panel-collapse collapse coupon_form " id="coupon">
                                    
                                    <div class="panel-body">
                                        <p class="mb-30 font-sm">If you have a coupon code, please apply it below.</p>
                                       

                                            
        
                                            <div class="form-group">
                                                <input type="text" id="code" name="code" placeholder="Enter Coupon Code...">
                                            </div>
                                            <div class="form-group">
                                                <button class="btn  btn-md" id="applycoupon" type="submit">Apply Coupon</button>
                                            </div>
                                            
                                        
                                       
                                    </div>
                                    
                                </div>
                            </div>




                            <div class="bt-1 border-color-1 mt-30 mb-30"></div>
                            <div class="payment_method">
                                <div class="mb-25">
                                    <h5>Payment</h5>
                                </div>
                                <div class="payment_option">
                                    <div class="custome-radio">
                                        <input class="form-check-input" required="" type="radio" name="payment_option" id="exampleRadios3" checked="">
                                        <label class="form-check-label" for="exampleRadios3" data-bs-toggle="collapse" data-target="#bankTranfer" aria-controls="bankTranfer">Direct Bank Transfer</label>
                                        <div class="form-group collapse in" id="bankTranfer">
                                            <p class="text-muted mt-5">There are many variations of passages of Lorem Ipsum available, but the majority have suffered alteration. </p>
                                        </div>
                                    </div>

                                    <div class="custome-radio">
                                        <input class="form-check-input" required="" type="radio" name="payment_option" id="exampleRadios4" checked="">
                                        <label class="form-check-label" for="exampleRadios4" data-bs-toggle="collapse" data-target="#checkPayment" aria-controls="checkPayment"> Cash On Delivery</label>
                                        <div class="form-group collapse in" id="checkPayment">
                                            <p class="text-muted mt-5">Please send your cheque to Store Name, Store Street, Store Town, Store State / County, Store Postcode. </p>
                                        </div>
                                    </div>

                                    
                                    <div class="custome-radio">
                                        <input class="form-check-input" required="" type="radio" name="payment_option"  id="exampleRadios5" value="online payment" checked="">
                                        <label class="form-check-label" for="exampleRadios5" data-bs-toggle="collapse" data-target="#paypal" aria-controls="paypal" onclick="createRazorpayOrder">online payment</label>
                                        <div class="form-group collapse in" id="payment_method">
                                            <p class="text-muted mt-5">Pay via PayPal; you can pay with your credit card if you don't have a PayPal account.</p>
                                        </div>
                                    </div>

                                </div>
                            </div>
                            <a href="#" class="btn btn-fill-out btn-block mt-30" id="placeOrderButton">Place Order</a>
                            
                            <script src="https://checkout.razorpay.com/v1/checkout.js"></script>

                            <script>
                                document.addEventListener("DOMContentLoaded", function () {
                                    let totalAmount;
                                    let discount;



                                    document.getElementById('applycoupon').addEventListener('click',function(event){
                                        event.preventDefault();
                                        const codeinput=document.getElementById('code');
                                        const code=codeinput.value.trim();
                                        
                                        const totalAmountinput=document.getElementById('totalAmount');
                                        const totalAmountText = totalAmountinput.textContent; // Assuming totalAmountinput is the element containing the text content
                                         const numericValue = parseFloat(totalAmountText.replace('â‚¹', ''));
                                         $.ajax({
                                            url:'/applycoupon',
                                            method:"POST",
                                            data:{
                                                totalAmount:numericValue,
                                                code:code
                                            },
                                            success:function(response){
                                                console.log(response);
                                                if(response){
                                                    totalAmount= response.totalAmount;
                                                    discount=response.discount
                                                    document.getElementById('discountcell').innerHTML= `<h6>${discount}</h6>`
                                                    document.getElementById('totalAmount').innerHTML= `<h6>${totalAmount}</h6>`
                                                }
                                            },
                                            error:function(xhr){
                                                console.log(xhr)
                                                Swal.fire(xhr.responseJSON.message);
                                            }
                                        
                                         })


                                    })


                                    
                                    // Function to check if the cart is empty
                                    function isCartEmpty() {
                                        // Check if the total amount in the cart is zero or not
                                        var totalAmount = parseFloat(document.querySelector('.product-subtotal span').innerText.replace(/[^0-9.-]+/g, ""));
                                        return totalAmount === 0;
                                    }
                            
                                    // Function to handle placing the order
                                    function placeOrder(addressId, totalAmount, paymentMethod) {
                                        console.log("payment method",paymentMethod);
                                        var productIdElement = document.getElementById('product-id');
                                        var productSizeElement = document.getElementById('product-size');
                                        var productQtyElement = document.getElementById('product-qty');
    
    // Access the text content inside the element
    var productId = productIdElement.textContent;
    var productsize = productSizeElement.textContent;
    var productqty = productQtyElement.textContent;
    
    // Now you can use productId in your client-side JavaScript code
    
                                       
 // or innerText

                                        
                                        $.ajax({
                                            url: "/placeorder",
                                            method: "POST",
                                            data: {
                                                addressId: addressId,
                                                totalAmount: totalAmount,
                                                paymentMethod: paymentMethod,
                                                productId:productId,
                                                productsize:productsize,
                                                productqty:productqty

                                             
                                            },
                                            success: function (response) {

                                                if(response.message == "Order placed successfully"){
                    // Display toast notification for successful order placement
                    Toastify({
                        text: "Order placed successfully!",
                        duration: 3000, // 3 seconds
                        close: true,
                        gravity: "top", // Show toast at the top
                        position: "center", // Center the toast
                        backgroundColor: "linear-gradient(to right, #00b09b, #96c93d)", // Custom background color
                    }).showToast();

                    // Redirect to the profile page after a short delay
                    setTimeout(function () {
                        window.location.href = '/profile';
                    }, 3000);
                } 
            },
                                            error: function (xhr, status, error) {
                                                // Display error message to the user
                                                alert("Failed to place order. Please try again later.");
                                                // Log the error for debugging
                                                console.error(xhr, status, error);
                                            }
                                        });
                                    }
                            
                                    // Event listener for clicking the "Place Order" button
                                    document.getElementById('placeOrderButton').addEventListener('click', function () {
                                        // Check if the cart is empty
                                        
                                            // Get the selected address ID
                                            var selectedAddressId = document.querySelector('input[name="selectedAddress"]:checked').value;
                                            alert("selectedAddressId" + selectedAddressId)
                                            // Get the total amount
                                            var totalAmount = parseFloat(document.getElementById('totalAmount').innerText.replace(/[^0-9.-]+/g, ""));
                                            alert("totalAmount" + totalAmount)
                                            // Get the selected payment method
                                            var selectedPaymentMethod = document.querySelector('input[name="payment_option"]:checked').nextElementSibling.textContent.trim();
                                            alert("selectedPaymentMethod" + selectedPaymentMethod)
                                            // Check if all required fields are filled
                                            if (!selectedAddressId) {
                                                alert("Please select an address.");
                                            } else {
                                                if(selectedPaymentMethod === "Cash On Delivery" ){
                                                    placeOrder(selectedAddressId, totalAmount, selectedPaymentMethod);
                                                    
                                                }else if(selectedPaymentMethod === "online payment"){
                                                   
                                                    createRazorpayOrder(selectedAddressId, totalAmount, selectedPaymentMethod);
                                                    
                                                }
                                                
                                            }
                                        
                                    });
                                });
                            </script>
                            <script>
                             function createRazorpayOrder(addressId, totalAmount, paymentMethod) {
                                
                                var productIdElement = document.getElementById('product-id');
                                        var productSizeElement = document.getElementById('product-size');
                                        var productQtyElement = document.getElementById('product-qty');
    
    // Access the text content inside the element
    var productId = productIdElement.textContent;
    var productsize = productSizeElement.textContent;
    var productqty = productQtyElement.textContent;
    

    $.ajax({
        url:"/placeorder/online",
        method:"POST",
        data:{
            addressId: addressId,
                                                totalAmount: totalAmount,
                                                paymentMethod: paymentMethod,
                                                productId:productId,
                                                productsize:productsize,
                                                productqty:productqty

        },
        success:function(response){
            console.log("response : " + response);
            var options = {
                                    "key": "rzp_test_XnSWcDHvXwMKdf",
                                    "amount": response.razorpayOrder.amount,
                                    "currency": "INR",
                                    "name": "Trendy_Go",
                                    "description": "Test Transaction",
                                    "image": "https://example.com/your_logo",
                                    "order_id": response.razorpayOrder.id,
                                    "handler": function (status) {

                                        verifyPayment(response, status);

                                    },
                                    "prefill": { //We recommend using the prefill parameter to auto-fill customer's contact information, especially their phone number
                                        "name": "customer name", //your customer's name
                                        "email": "gaurav.kumar@example.com",
                                        "contact": "9000090000"  //Provide the customer's phone number for better conversion rates 
                                    },
                                    "notes": {
                                        "address": "Razorpay Corporate Office"
                                    },
                                    "theme": {
                                        "color": "#3399cc"
                                    }
                                };
                                var rzp1 = new Razorpay(options);
                                rzp1.on('payment.failed', function (response) {
                                    alert("payment failed ")
                                })
                                rzp1.open();

        },
        error:function(xhr){
            console.log(xhr);
        }
    })

}


function verifyPayment(order, payment) {
                

                $.ajax({
                    url: "/verifypayment",
                    method: "POST",
                    data: {
                        order,
                        payment
                    },
                    success: function (response) {
    console.log("response 1 : ", response);
    if (response) {
        Swal.fire({
            title: "Order success",
            text: "Order placed successfully",
            icon: "success",
            reverseButtons: true
        }).then(function (result) {
            if (result.isConfirmed) {
                // Redirect to the orderSuccess page upon clicking "OK" in the Swal.fire dialog
                window.location.href = "/orderSuccess";
            } else {
                // Redirect to the profile page if the user cancels the dialog
                window.location.href = "/profile";
            }
        });
    } else {
        // If the response indicates a payment failure, display an error message
        Swal.fire("Payment Failed !!!");
    }
}


                })


            }


   
                            </script>
                            
                            

                            
                        </div>
                    </div>
                </div>






            </div>
        </section>
        
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
    const editAddressButtons = document.querySelectorAll('.edit-address-btn');

    editAddressButtons.forEach(button => {
        button.addEventListener('click', async event => {
            event.preventDefault(); // Prevent default link behavior
            
            const addressId = button.dataset.addressId; // Get the address ID from data-address-id attribute
            
            // Call the addaddress function using fetch API or XMLHttpRequest
            try {
                const response = await fetch('/createaddress', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ editID: addressId }) // Pass the address ID to the server
                });

                if (response.ok) {
                    // Handle success response
                    const data = await response.json();
                    console.log(data); // Log or handle the response data as needed
                    window.location.href = "/profile"; // Redirect to profile page
                } else {
                    // Handle error response
                    console.error('Error:', response.statusText);
                }
            } catch (error) {
                console.error('Error adding address:', error);
            }
        });
    });
});

    </script>


<!-- adress in checkout -->
<script>
    const addressInput = document.getElementById("address_type");
    const adddressError = document.getElementById("address_type_error");
    const nameInput = document.getElementById("name");
    const nameError = document.getElementById("name_error");
    const housenameInput = document.getElementById("housename");
    const houenameError = document.getElementById("housename_error");
    const landmarkInput = document.getElementById("landmark");
    const landmarkError = document.getElementById("landmark_error");
    const cityInput = document.getElementById("city");
    const cityError = document.getElementById("city_error");
    const stateInput =document.getElementById("state");
    const stateError = document.getElementById("state_error");
    const pincodeInput = document.getElementById("pincode");
    const pincodeError = document.getElementById("pincode_error");
    const phoneInput = document.getElementById("phone");
    const phoneError = document.getElementById("phone_error");
    const altphoneInput = document.getElementById("altphone");
    const altphoneError = document.getElementById("altphone_error");
    const alphabet =   /^[A-Za-z\s]+$/;
    const digits = /^[0-9]+$/;



    function validateAddressType(){
        const address = addressInput.value.trim();
        if(address === "Home" || address === "Company"){
            adddressError.style.display = "block";
            adddressError.style.color = "red";
            adddressError.textContent = "address type must be home or company";
        }else{
            nameError .style.display = "none";

        }
    }


    function validateName(){
        const name = nameInput.value.trim();
        if(name === ""){
            nameError .style.display = "block";
            nameError.style.color = "red";
            nameError.textContent = "Enter a Valid Username"
        }
        else if(!alphabet.test(name)){
            nameError .style.display = "block";
            nameError.style.color = "red";
            nameError.textContent = "Username can only contain alphabets"

        }
        else if(name.length > 25){
            nameError .style.display = "block";
            nameError.style.color = "red";
            nameError.textContent = "Username  cannot be more than 25 characters"

        }
        else{
            nameError .style.display = "none";
        }
        
    }

    function validateHouseName(){
        const housename = housenameInput.value.trim();
        if(housename === ""){
            houenameError.style.display = "block";
            houenameError.style.color = "red";
            houenameError.textContent = "Enter valid House name"

        }
        else if(!alphabet.test(housename)){
            houenameError.style.display = "block";
            houenameError.style.color = "red";
            houenameError.textContent = "Enter can only contain alphabets"

        }
        else{
            houenameError.style.display = "none";
        }
    }

    function validateLandmark(){
        const landmark = landmarkInput.value.trim();
        if(landmark === ""){
            landmarkError.style.display = "block";
            landmarkError.style.color = "red";
            landmarkError.textContent = "Enter a valid landmark";
        }
        else{
            landmarkError.style.display = "none";
        }
    }


    function validateCity(){
        const city = cityInput.value.trim();
        if(city === ""){
            cityError.style.display = "block";
            cityError.style.color = "red";
            cityError.textContent = "Enter a Valid city name";
        }
        else if(!alphabet.test(city)){
            cityError.style.display = "block";
            cityError.style.color = "red";
            cityError.textContent = "city must be an alphabet";

        }else{
            cityError.style.display = "none";
        }
    }


    function validateState(){
        const state = stateInput.value.trim();
        if(state === ""){
            stateError.style.display = "block";
            stateError.style.color = "red";
            stateError.textContent = "Enter a vaild state"
        }
        else if(!alphabet.test(state)){
            stateError.style.display = "block";
            stateError.style.color = "red";
            stateError.textContent = "State must be an alphabet"

        }
        else{
            stateError.style.display = "none";
        }
    }


    function validatePincode(){

        const pincode = pincodeInput.value.trim();
        if(pincode === ""){
            pincodeError.style.display = "block";
            pincodeError.style.color = "red";
            pincodeError.textContent = "Enter valid pincode";
        }
        else if(pincode.length != 6){
            pincodeError.style.display = "block";
            pincodeError.style.color = "red";
            pincodeError.textContent = "pincode must be 6 digit";

        }
        else if(!digits.test(pincode)){
            pincodeError.style.display = "block";
            pincodeError.style.color = "red";
            pincodeError.textContent = "pincode must be  digit";

        }
        else{
            pincodeError.style.display = "none";
        }
    }


    
    function validatePhone() {
    const phone = phoneInput.value.trim();
    if(phone === ""){
        phoneError.style.display = "block";
        phoneError.style.color = "red";
        phoneError.textContent = "Enter valid number";
    }
    else if(phone.length > 12){
        phoneError.style.display = "block";
        phoneError.style.color = "red";
        phoneError.textContent = "phone number limit exceeds";
    }
    else if(!digits.test(phone)){
        phoneError.style.display = "block";
        phoneError.style.color = "red";
        phoneError.textContent = "phone number must be digits";
    }
    else{
        phoneError.style.display = "none";
    }
}


function validateAltPhone() {
    const altphone = altphoneInput.value.trim();
    if(altphone === ""){
        altphoneError.style.display = "block";
        altphoneError.style.color = "red";
        altphoneError.textContent = "Enter valid number";
    }
    else if(altphone.length > 12){
        altphoneError.style.display = "block";
        altphoneError.style.color = "red";
        altphoneError.textContent = "phone number limit exceeds";
    }
    else if(!digits.test(altphone)){
        altphoneError.style.display = "block";
        altphoneError.style.color = "red";
        altphoneError.textContent = "phone number must be digits";
    }
    else{
        altphoneError.style.display = "none";
    }
}


</script>
    














   <%- include('../layouts/userFooter') %>